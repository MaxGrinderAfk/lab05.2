
# README: Производители и потребители с использованием очереди и семафоров

## Описание
Этот проект реализует многопроцессную систему производителей и потребителей, использующую общую память и семафоры для синхронизации. Производители создают сообщения и добавляют их в очередь, а потребители извлекают сообщения и проверяют их целостность.

## Функциональность
- Использование очереди в разделяемой памяти для хранения сообщений.
- Синхронизация процессов с помощью семафоров.
- Динамическое создание и остановка производителей и потребителей.
- Обработка сигналов для корректного завершения работы.
- Отображение состояния системы.

## Основные компоненты
- `producer(int id)`: Функция производителя, создающая и добавляющая сообщения в очередь.
- `consumer(int id)`: Функция потребителя, извлекающая сообщения из очереди и проверяющая их хеш-сумму.
- `sem_operation(int semid, int sem_num, int op)`: Функция для работы с семафорами.
- `init_queue()`: Инициализация разделяемой памяти для очереди.
- `init_semaphores()`: Инициализация семафоров.
- `create_producer()`, `create_consumer()`: Функции для создания новых процессов производителей и потребителей.
- `stop_producer()`, `stop_consumer()`: Остановка работающих производителей и потребителей.
- `show_status()`: Отображение текущего состояния очереди и процессов.
- `cleanup()`: Очистка ресурсов перед завершением программы.
- `signal_handler(int sig)`: Обработка сигналов завершения.

## Компиляция и запуск
Скомпилировать программу можно с помощью GCC:
```sh
gcc -o producer_consumer main.c -lpthread
```
Запуск программы:
```sh
./producer_consumer
```

## Управление
- `p` - создать производителя
- `c` - создать потребителя
- `P` - остановить производителя
- `C` - остановить потребителя
- `s` - показать статус очереди
- `q` - завершить работу

## Завершение работы
Программа может быть завершена вручную с помощью `q` или сигнала `SIGINT` (`Ctrl+C`). Все процессы и ресурсы освобождаются при выходе.

## Зависимости
- `unistd.h`, `sys/types.h`, `sys/ipc.h`, `sys/shm.h`, `sys/sem.h`, `sys/wait.h`, `signal.h`, `stdio.h`, `stdlib.h`, `stdbool.h`, `string.h`, `fcntl.h`, `time.h`, `termios.h`

## Возможные улучшения
- Логирование событий в файл
- Поддержка многопоточности вместо процессов
- Настройка параметров через конфигурационный файл
